<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>å¨ç‰¹äº”é‡‘</title>
    <base href="/" />
    <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="css/app.css" rel="stylesheet" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="Wtdl.Wasm.styles.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" />
</head>

<body>
    <div id="app">
        <style>
            @keyframes slide {
                0% {
                    transform: translateX(-25%);
                }

                100% {
                    transform: translateX(25%);
                }
            }

            .mud-wasm {
                animation: slide 3s ease-in-out infinite alternate;
                background-image: linear-gradient(-45deg,#00557C 50%,#1BA6D2 50%);
                bottom: 0;
                left: -50%;
                opacity: .5;
                position: fixed;
                right: -50%;
                top: 0;
                z-index: -1
            }

            .mud-wasm-cont {
                left: 50%;
                padding: 10vmin;
                position: fixed;
                text-align: center;
                top: 50%;
                transform: translate(-50%,-50%)
            }
        </style>

        <div style="height:100%;width:100%;margin:0;position:fixed;">
            <div class="mud-wasm"></div>
            <div class="mud-wasm" style="animation-direction:alternate-reverse;animation-duration:3s;"></div>
            <div class="mud-wasm" style="animation-duration:5s;"></div>
            <div class="mud-wasm-cont ">
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                     width="200.000000pt" height="200.000000pt" viewBox="0 0 701.000000 701.000000"
                     preserveAspectRatio="xMidYMid meet">

                    <g transform="translate(0.000000,701.000000) scale(0.100000,-0.100000)"
                       fill="#ffffff" stroke="none">
                        <path d="M1560 5914 c-14 -7 -39 -14 -56 -14 -17 0 -37 -7 -44 -15 -7 -8 -20 -15 -30 -15 -10 0 -23 -7 -30 -15 -7 -8 -18 -15 -24 -15 -7 0 -23 -8 -36 -17
                -42 -32 -160 -150 -160 -162 0 -6 -4 -11 -10 -11 -5 0 -12 -11 -16 -25 -3 -13 -12 -29 -20 -36 -8 -6 -14 -19 -14 -29 0 -10 -7 -23 -15 -30 -8 -7 -15 -27
                -15 -44 0 -17 -7 -44 -15 -60 -12 -23 -15 -85 -15 -360 l0 -332 29 -34 c26 -32 33 -34 84 -34 51 0 58 3 86 34 l31 35 0 326 c0 270 2 328 15 345 8 10 15
                29 15 40 0 12 7 27 15 34 8 7 15 18 15 24 0 22 107 120 157 145 26 13 57 29 68 35 13 7 138 13 351 16 l331 5 31 25 c29 23 32 30 32 81 0 49 -3 58 -33 87
                l-33 32 -334 -1 c-266 -1 -340 -4 -360 -15z" />
                        <path d="M4747 5896 c-33 -30 -37 -39 -37 -81 0 -42 5 -52 35 -81 l35 -33 333 -3 c217 -2 339 -7 352 -14 11 -6 42 -22 68 -35 51 -25 133 -99 148 -133 5 -12 13 -28 18 -36 46 -78 46 -81 49 -421 l3 -326 29 -34 c25 -30 33 -34 78 -34 44
                0 55 4 86 34 l36 35 0 327 c0 270 -3 332 -15 355 -8 16 -15 43 -15 60 0 17 -7 37 -15 44 -8 7 -15 19 -15 27 0 25 -67 127 -118 181 -49 52 -173 142 -195 142
                -7 0 -22 7 -33 15 -10 8 -32 15 -49 15 -16 0 -41 7 -55 15 -20 12 -88 14 -356 15 l-330 0 -37 -34z" />
                        <path d="M1910 5135 c-7 -8 -19 -15 -26 -15 -8 0 -14 -6 -14 -14 0 -7 -7 -19
                -15 -26 -13 -11 -15 -87 -15 -569 l0 -557 31 -32 c18 -18 41 -35 53 -37 11 -3
                271 -4 576 -3 l555 3 25 25 25 25 0 578 0 578 -35 29 -35 29 -556 1 c-483 0
                -558 -2 -569 -15z" />
                        <path d="M3967 5113 l-37 -36 0 -561 0 -560 22 -32 c13 -18 32 -35 43 -38 11
                -3 271 -6 579 -6 l558 0 34 37 34 37 0 558 0 558 -40 40 -40 40 -558 0 -559 0
                -36 -37z" />
                        <path d="M1875 3023 l-35 -37 0 -557 c0 -482 2 -558 15 -569 8 -7 15 -19 15
                -26 0 -8 6 -14 14 -14 7 0 19 -7 26 -15 11 -13 86 -15 569 -15 l556 1 35 29
                35 29 0 578 0 578 -25 25 -25 25 -572 3 -573 2 -35 -37z" />
                        <path d="M3991 3053 c-7 -3 -23 -15 -35 -27 -20 -20 -21 -33 -24 -202 l-3
                -181 40 -36 41 -37 156 0 c239 0 254 15 254 257 0 143 -1 150 -25 183 -14 19
                -31 37 -37 42 -14 9 -345 10 -367 1z" />
                        <path d="M4771 3053 c-7 -3 -23 -15 -35 -27 -20 -20 -21 -33 -24 -199 l-3
                -178 39 -40 40 -39 158 0 c171 0 185 4 233 59 19 22 21 37 21 191 l0 166 -34
                37 -34 37 -173 -1 c-96 0 -180 -3 -188 -6z" />
                        <path d="M1124 2271 c-12 -5 -31 -23 -43 -39 -20 -29 -21 -40 -21 -360 0 -273
                3 -335 15 -358 8 -16 15 -43 15 -60 0 -17 7 -37 15 -44 8 -7 15 -20 15 -30 0
                -10 6 -23 14 -29 8 -7 17 -23 20 -36 4 -14 11 -25 16 -25 6 0 10 -5 10 -11 0
                -12 118 -130 160 -161 13 -10 29 -18 36 -18 6 0 17 -7 24 -15 7 -8 20 -15 30
                -15 10 0 23 -7 30 -15 7 -8 29 -15 49 -15 20 -1 47 -7 61 -15 20 -12 88 -14
                356 -15 l330 0 32 33 c28 29 32 40 32 87 0 50 -3 57 -32 80 l-31 25 -331 5
                c-213 3 -338 9 -351 16 -11 6 -41 22 -67 35 -26 13 -63 37 -81 54 -44 41 -107
                130 -107 152 0 10 -7 27 -15 37 -13 17 -15 75 -15 345 l-1 326 -27 34 c-23 26
                -37 34 -73 37 -24 2 -54 0 -65 -5z" />
                        <path d="M3995 2273 c-11 -2 -30 -18 -43 -36 -21 -31 -22 -43 -22 -203 l0
                -171 37 -36 36 -37 161 0 c136 0 165 3 187 18 64 42 64 42 67 219 4 164 4 164
                -23 203 -14 21 -36 41 -48 44 -24 6 -320 6 -352 -1z" />
                        <path d="M4775 2274 c-11 -3 -30 -19 -43 -37 -21 -31 -22 -44 -22 -200 l0
                -167 36 -40 36 -40 168 0 167 0 41 40 42 39 0 168 -1 168 -30 35 -30 35 -172
                1 c-95 1 -181 0 -192 -2z" />
                        <path d="M5815 2271 c-11 -5 -30 -20 -42 -34 -21 -25 -22 -33 -25 -354 -4
                -300 -6 -332 -24 -373 -31 -71 -54 -110 -64 -110 -6 0 -10 -5 -10 -10 0 -29
                -102 -100 -186 -130 -54 -18 -82 -20 -373 -20 l-314 0 -33 -35 c-29 -29 -34
                -41 -34 -81 0 -41 4 -50 37 -80 l37 -34 327 0 c270 0 332 3 355 15 16 8 43 15
                60 15 17 0 37 7 44 15 7 8 21 15 31 15 28 0 147 85 202 143 52 57 117 156 117
                180 0 8 7 20 15 27 8 7 15 27 15 44 0 17 7 44 15 60 12 23 15 84 15 355 l-1
                326 -29 33 c-32 35 -95 50 -135 33z" />
                    </g>
                </svg>
                <!--<svg width="100%" height="100%" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                    <path fill="white" d="M 37.00,90.00 C 37.00,90.00 328.90,90.00 328.90,90.00 328.90,90.00 328.90,410.00 328.90,410.00 328.90,410.00 37.00,410.00 37.00,410.00 37.00,410.00 37.00,90.00 37.00,90.00 Z M 381.49,90.75 C 381.49,90.75 464.00,90.75 464.00,90.75 464.00,90.75 464.00,410.00 464.00,410.00 464.00,410.00 381.49,410.00 381.49,410.00 381.49,410.00 381.49,280.80 381.49,280.80 381.49,280.80 337.37,280.80 337.37,280.80 337.37,280.80 337.37,220.44 337.37,220.44 337.37,220.44 381.49,220.44 381.49,220.44 381.49,220.44 381.49,90.75 381.49,90.75 Z M 119.51,150.36 C 119.51,150.36 119.51,220.44 119.51,220.44 119.51,220.44 236.91,220.44 236.91,220.44 236.91,220.44 236.91,280.80 236.91,280.80 236.91,280.80 119.51,280.80 119.51,280.80 119.51,280.80 119.51,349.64 119.51,349.64 119.51,349.64 246.39,349.64 246.39,349.64 246.39,349.64 246.39,150.36 246.39,150.36 246.39,150.36 119.51,150.36 119.51,150.36 Z" />
                </svg>-->
            </div>
        </div>

        <!--<svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>-->
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ğŸ—™</a>
    </div>
    <script src="_framework/blazor.webassembly.js"></script>
    <script src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
    <script src="_content/MudBlazor/MudBlazor.min.js"></script>
    <script>
        async function fetchOAuthUrl() {
            try {
                const url = window.location.href;
                console.log('window.location.href:', url);
                const pattern = /(\d{12})$/;
                const match = url.match(pattern);
                if (match) {

                    const urlqrcode = match[0];
                    console.log('match:', urlqrcode);

                    const oauthUrl = "http://www.rewt.cn/OAuth2Url?qrcode=" + urlqrcode;

                    console.log('oauthUrl:', oauthUrl);
                    const response = await fetch(oauthUrl, { method: 'GET', mode: 'cors' });

                    if (!response.ok) {
                        throw new Error('æœªèƒ½è®¿é—®OAuth ç½‘å€ã€‚');
                    };
                    const content = await response.text();
                    console.log('response.text():', content);

                    window.location.href = content;
                }
                console.log('æ‰¾ä¸åˆ°äºŒç»´ç åºå·:', url);
            } catch (error) {
                console.error('fetchOAuthUrl() Error:', error);
            }
        }
        const params = new URLSearchParams(window.location.search);
        if (params.has('code')) {
            // URL åŒ…å« "code" æŸ¥è¯¢å‚æ•°, ä»ä¸­è·å– "code" å€¼.
            const code = params.get('code');
            // åœ¨è¿™é‡Œæ‰§è¡Œç›¸åº”çš„ä»£ç 
        } else {
            // URL ä¸åŒ…å« "code" æŸ¥è¯¢å‚æ•°, é‡å®šå‘åˆ°å¾®ä¿¡ OAuth æˆæƒé¡µé¢.

            console.log('URL ä¸åŒ…å« "code" æŸ¥è¯¢å‚æ•°, é‡å®šå‘åˆ°å¾®ä¿¡ OAuth æˆæƒé¡µé¢.');
            fetchOAuthUrl();
        }

        function openDialog() {

            var modalOverlay = document.getElementById('modalOverlay');
            var modal = document.getElementById('exampleModal');
            modal.style.display = 'block';
            modalOverlay.style.display = 'block';

        }

        function closeDialog() {
            var modalOverlay = document.getElementById('modalOverlay');
            var modal = document.getElementById('exampleModal');
            modal.style.display = 'none';
            modalOverlay.style.display = 'none';
        }
    </script>
</body>
</html>